<!DOCTYPE html>
<head>
    <title></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <style>
        [v-cloak]{
            display: none;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
           <api-component>
               <h2 slot="title">#1</h2>
               <p slot="caption">Here is Today's pic</p>
           </api-component> 
           <api-component date="2018-08-07">
               <h2 slot="title">#2</h2>
               <p slot="caption" slot-scope="pic">Here is the pic from {{pic.date}}</p>
           </api-component>
        </div>
    </div>

      <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script>
        
        Vue.component('api-component',{
            template:'<div>\
                        <slot name="title"></slot>\
                        <img width="300" height="200" :src="imgSrc" :title="imgTitle">\
                        <slot name="caption" :date="date"><p>Unknown date</p></slot>\
                    </div>',
            props:['date'],
            data: function() {
                return{
                    imgSrc:'',
                    imgTitle:'',
                }
            },
            created:function(){
                this.FetchApi();
            },
            methods:{
                FetchApi:function(){
                    var apiKey= 'JkNbYP4tOx1cQR9lagxhqzxUDCyd0wmPfbJJRARM';
                    var url='https://api.nasa.gov/planetary/apod?api_key=' + apiKey;
                    var self=this;
                    if(this.date){
                        url += "&date=" + this.date;
                    }
                    axios.get(url)
                    .then(function(res){
                        self.imgSrc=res.data.url;
                        self.imgTitle=res.data.title;
                     })
                }
            }
        });

        var vm = new Vue({
            el: '#app',  
        });

        

    </script>
</html>